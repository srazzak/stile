import{I as x,t as i,c,w as f,a as m,V as h,K as g}from"./view-context-BPS-IHkj.js";import{r,n as e,o as j,L as u,M as y,p as v,S,q as w,O as N,t as E}from"./chunk-GNGMS2XR-DdblaObd.js";import{u as d}from"./dexie-react-hooks-DKd2tn_9.js";const p=r.forwardRef((t,s)=>e.jsx(x,{className:"rounded-sm p-2 duration-150",...t,ref:s}));p.displayName="Input";const L=()=>{const[t,s]=r.useState(""),o=r.useRef(null),a=n=>{var l;n.preventDefault(),t.trim()&&(i.createSection({title:t}),s(""),(l=o.current)==null||l.focus())};return e.jsx("form",{className:"flex flex-col gap-2 opacity-0 duration-100 group-hover:opacity-100 focus-within:opacity-100",onSubmit:a,children:e.jsx(p,{placeholder:"add section",className:"w-full font-serif text-xl",value:t,onChange:n=>s(n.target.value),ref:o})})};function b({section:t,isActive:s}){const o=d(async()=>(await i.getTodosBySectionId(t.id)).filter(n=>!n.completed).length,[t]);return e.jsxs(u,{to:{pathname:`/section/${t.id}`},className:c("flex items-baseline gap-1 font-serif text-gray-400","hover:text-gray-500",s?"text-foreground hover:text-foreground underline":""),children:[t.title,e.jsx("span",{className:"-translate-y-[1px] text-sm",children:o&&o>0?` (${o})`:""})]})}function R(){let t=j();const s=d(()=>i.getAllSections());return e.jsxs("ul",{className:"group absolute left-0 flex w-fit flex-col gap-2 px-6 py-60 text-xl font-medium",children:[e.jsx(u,{to:{pathname:"/"},className:c("font-serif text-gray-400","hover:text-gray-500",t.pathname==="/"?"text-foreground hover:text-foreground underline":""),children:"home"}),s==null?void 0:s.map(o=>e.jsx(b,{section:o,isActive:t.pathname===`/section/${o.id}`},o.id)),e.jsx(L,{})]})}const A=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap"}];function O({children:t}){return e.jsxs("html",{lang:"en",children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),e.jsx("link",{rel:"icon",href:"/icon.png"}),e.jsx(y,{}),e.jsx(v,{})]}),e.jsxs("body",{className:"relative h-full w-full antialiased",children:[e.jsxs(h,{children:[e.jsx(R,{}),e.jsx(g,{children:t})]}),e.jsx(S,{}),e.jsx(w,{})]})]})}const P=f(function(){return e.jsx(N,{})}),$=m(function({error:s}){let o="Oops!",a="An unexpected error occurred.",n;return E(s)&&(o=s.status===404?"404":"Error",a=s.status===404?"The requested page could not be found.":s.statusText||a),e.jsxs("main",{className:"pt-16 p-4 container mx-auto",children:[e.jsx("h1",{children:o}),e.jsx("p",{children:a}),n]})});export{$ as ErrorBoundary,O as Layout,P as default,A as links};
