import{n as b}from"./view-context-BPS-IHkj.js";import{x as s}from"./chunk-GNGMS2XR-DdblaObd.js";function p(n,o,f){var i,a;typeof n=="function"?(i=o||[],a=f):(i=[],a=o);var r=s.useRef({hasResult:!1,result:a,error:null}),l=s.useReducer(function(e){return e+1},0);l[0];var c=l[1],v=s.useMemo(function(){var e=typeof n=="function"?n():n;if(!e||typeof e.subscribe!="function")throw n===e?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!r.current.hasResult&&typeof window<"u"&&(typeof e.hasValue!="function"||e.hasValue()))if(typeof e.getValue=="function")r.current.result=e.getValue(),r.current.hasResult=!0;else{var t=e.subscribe(function(u){r.current.result=u,r.current.hasResult=!0});typeof t=="function"?t():t.unsubscribe()}return e},i);if(s.useDebugValue(r.current.result),s.useEffect(function(){var e=v.subscribe(function(t){var u=r.current;(u.error!==null||u.result!==t)&&(u.error=null,u.result=t,u.hasResult=!0,c())},function(t){var u=r.current;u.error!==t&&(u.error=t,c())});return typeof e=="function"?e:e.unsubscribe.bind(e)},i),r.current.error)throw r.current.error;return r.current.result}function y(n,o,f){return p(function(){return b(n)},o||[],f)}export{y as u};
